service: lambda-podcast 

provider:
  name: aws
  runtime: python2.7
  memorySize: 128 
  timeout: 300
  stage: dev
  region: eu-west-1
  environment:
    s3_region_name: eu-west-1       # aws region where both the music and publish bucket are located
    s3_musicbucket: marekmusic      # bucket name containing all mp3 files - this bucket can be privately accessible only to you
    s3_webbucket: marek.rocks       # bucket name where the podcast rss xml should be written to - it should be webhosting enabled
    s3_res_file: rss.xml            # filename that should be used for the URL on the podcast publish bucket, you need this path to 
    link_expiry: 86400              # s3 signed urls should expiry after x seconds - the default is 24 hours. 
    podcast_folder: music           # s3 folder name in the s3 bucket used to store the redirection files - this way you can create nice looking signed URL's
    podcast_name: marekq
    podcast_desc: my collection of mp3
    podcast_url: https://marek.rocks
    podcast_img: https://marek.rocks/podcast.png
    podcast_author: marekq
    dynamo_table: podcast-cache     # dynamodb table used for storing id3 data
    enable_id3: True                # set to "False" to disable id3 analysis of mp3 files - in that case, the folder path and folder names will be used instead (i.e. s3://<podcast-name>/<podcast-track-name> )

functions:
  podcast:
    handler: mp3.handler